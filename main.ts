controller.B.onEvent(ControllerButtonEvent.Pressed, function () {
    drop()
})
controller.A.onEvent(ControllerButtonEvent.Pressed, function () {
    if (brain.y >= 90) {
        brain.setVelocity(0, -200)
        scene.cameraShake(2, 100)
        sec = sec - 100
    }
})
function drop () {
    moving.vx = 0
    moving.ay = 300
}
function blood_insertion () {
    moving.setPosition(91, 53)
    for (let index = 0; index < 100; index++) {
        if (moving.x < 120) {
            moving.vx = 50
            pause(1000)
        }
        if (moving.x > 120) {
            moving.vx = -50
            pause(1000)
        }
    }
}
let random = 0
let moving: Sprite = null
let brain: Sprite = null
let sec = 0
music.play(music.createSong(assets.song`bgm`), music.PlaybackMode.LoopingInBackground)
sec = 0
let Z_INDEX = -1000
scene.setBackgroundColor(15)
brain = sprites.create(img`
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . 3 3 3 3 3 3 . . . . . . 
    . . . 3 3 3 3 3 3 3 3 3 3 . . . 
    . . 3 3 3 3 . . . . 3 3 3 . . . 
    . . 3 3 3 3 3 3 3 3 . . 3 3 . . 
    . 3 3 3 3 . . . . 3 3 . 3 3 . . 
    . 3 3 3 . 3 3 3 . 3 3 3 . 3 . . 
    . 3 3 3 3 3 3 3 3 . 3 3 . 3 . . 
    . 3 3 3 3 3 3 3 3 . 3 3 . 3 . . 
    . . 3 3 3 3 . . 3 . 3 3 . . . . 
    . . . . 3 3 3 . . . 3 3 . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    `, SpriteKind.Player)
let mouse = sprites.create(img`
    1 . . . . . . . . . . . . . . . 
    1 1 . . . . . . . . . . . . . . 
    1 1 1 . . . . . . . . . . . . . 
    1 1 1 1 . . . . . . . . . . . . 
    1 1 1 1 1 . . . . . . . . . . . 
    1 1 1 1 1 1 . . . . . . . . . . 
    1 1 1 1 . . . . . . . . . . . . 
    1 . 1 1 . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    `, SpriteKind.Player)
controller.moveSprite(mouse, 100, 100)
tiles.setCurrentTilemap(tilemap`level6`)
brain.setPosition(20, 50)
brain.ay = 500
forever(function () {
    random = randint(1, 2)
    if (random == 1) {
        moving = sprites.create(img`
            . . . . . . . 4 . . . . . . . . 
            . . . . . . . 4 4 . . . . . . . 
            . . . . 4 4 4 4 4 4 4 . . . . . 
            . . . . 4 4 4 4 4 4 4 . . . . . 
            . . . . . 3 4 4 4 4 . . . . . . 
            . . . . . 3 4 4 4 4 . . . . . . 
            . . . . . 3 4 4 4 4 . . . . . . 
            . . . . . 3 3 4 4 4 . . . . . . 
            . . . . . f f 4 4 4 . . . . . . 
            . . . . . f f 4 4 4 . . . . . . 
            . . . . . f f f 4 4 . . . . . . 
            . . . . . f f f 4 4 . . . . . . 
            . . . . . f f f f 4 . . . . . . 
            . . . . . . f f f . . . . . . . 
            . . . . . . . f . . . . . . . . 
            . . . . . . . f . . . . . . . . 
            `, SpriteKind.Player)
    }
    scroller.setLayerZIndex(scroller.BackgroundLayer.Layer1, Z_INDEX)
    scroller.setLayerImage(scroller.BackgroundLayer.Layer0, img`
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ...........................................................................ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc............
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        `)
    Z_INDEX = Z_INDEX - 1
    blood_insertion()
})
forever(function () {
    pause(1000)
    tiles.setCurrentTilemap(tilemap`level6`)
    sec = sec + 100
})
forever(function () {
    tiles.setTileAt(tiles.getTileLocation(1, 1), assets.tile`myTile16`)
    pause(100)
    tiles.setTileAt(tiles.getTileLocation(1, 1), assets.tile`myTile15`)
    pause(900)
})
forever(function () {
    if (sec < -100 || sec > 150) {
        game.gameOver(false)
    }
})
